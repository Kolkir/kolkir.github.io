<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Debug STL with GDB</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Debug STL with GDB"/>
            <meta property="og:url" content="./debug-stl-with-gdb.html"/>
            <meta property="og:description" content="I've found very useful script for viewing STL containers under GDB here is link. Also i duplicated them here : ########################################## # # # STL GDB evaluators/views/utilities # # # ########################################## # # The new GDB commands: # are entirely non instrumental # do not depend on any "inline"(s) - e.g. size(), [], etc # are extremely tolerant to debugger settings ..."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="./theme/css/pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>

        <link href="./feeds\all.atom.xml" type="application/atom+xml" rel="alternate"
              title="C-Vision ATOM Feed"/>
        <link href="./feeds/all.rss.xml" type="application/atom+xml" rel="alternate"
              title="C-Vision RSS Feed"/>

</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="." class="navbar-brand">C-Vision</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li><a href="./pages/about-me.html">About me</a></li>
                        <li><a href="./pages/camera-calibration.html">Camera calibration</a></li>
                        <li><a href="./pages/dicom-to-stl.html">DICOM to STL</a></li>
                        <li><a href="./pages/multithreadingc.html">Multithreading(C++)</a></li>
                        <li class="active">
                            <a href="./category/programming.html">Programming</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="./archives.html"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./debug-stl-with-gdb.html"
                       rel="bookmark"
                       title="Permalink to Debug STL with GDB">
                        Debug STL with GDB
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="icon-calendar"></i>Wed 26 January 2011
    </span>



</footer><!-- /.post-info -->                    </div>
                </div>
                <div><p>I've found very useful script for viewing STL containers under GDB here
is <a class="reference external" href="http://help.lockergnome.com/linux/GDB-capabilities-exploring-STL-classes--ftopict279673.html">link</a>. Also i duplicated them here :</p>
</div><div><pre class="literal-block">
##########################################
# #
# STL GDB evaluators/views/utilities #
# #
##########################################
#
# The new GDB commands:
# are entirely non instrumental
# do not depend on any &quot;inline&quot;(s) - e.g. size(), [], etc
# are extremely tolerant to debugger settings
#
# This file should be &quot;included&quot; in .gdbinit as following:
# source stl-views.gdb or just paste it into your .gdbinit file
#
# The following STL containers are currently supported:
#
# std::vector -- via pvector command
# std::list -- via plist command
# std::map -- via pmap command
# std::multimap -- via pmap command
# std::set -- via pset command
# std::multiset -- via pset command
# std::deque -- via pdequeue command
# std::stack -- via pstack command
# std::queue -- via pqueue command
# std::priority_queue -- via ppqueue command
# std::bitset -- via pbitset command
# std::string -- via pstring command
# std::widestring -- via pwstring command
#
# The end of this file contains (optional) C++ beautifiers
#
##########################################################################
# #
# CopyRight &#64; 2008 - Dan C Marinescu - All Rights Reserved under GPL V3. #
# #
# Email: dan_c_marinescu.RemoveThis&#64;yahoo.com #
# #
##########################################################################

#
# std::vector&lt;&gt;
#

define pvector
if $argc == 0
help pvector
else
set $size = $arg0._M_impl._M_finish - $arg0._M_impl._M_start
set $capacity = $arg0._M_impl._M_end_of_storage - $arg0._M_impl._M_start
set $size_max = $size - 1
end
if $argc == 1
set $i = 0
while $i &lt; $size printf &quot;elem[%u]: &quot;, $i p *($arg0._M_impl._M_start + $i) set $i++ end end if $argc == 2 set $idx = $arg1 if $idx &lt; 0 || $idx &gt; $size_max
printf &quot;idx1, idx2 are not in acceptable range: [0..%u].n&quot;, $size_max
else
printf &quot;elem[%u]: &quot;, $idx
p *($arg0._M_impl._M_start + $idx)
end
end
if $argc == 3
set $start_idx = $arg1
set $stop_idx = $arg2
if $start_idx &gt; $stop_idx
set $tmp_idx = $start_idx
set $start_idx = $stop_idx
set $stop_idx = $tmp_idx
end
if $start_idx &lt; 0 || $stop_idx &lt; 0 || $start_idx &gt; $size_max || $stop_idx &gt; $size_max
printf &quot;idx1, idx2 are not in acceptable range: [0..%u].n&quot;, $size_max
else
set $i = $start_idx
while $i &lt;= $stop_idx printf &quot;elem[%u]: &quot;, $i p *($arg0._M_impl._M_start + $i) set $i++ end end end if $argc &gt; 0
printf &quot;Vector size = %un&quot;, $size
printf &quot;Vector capacity = %un&quot;, $capacity
printf &quot;Element &quot;
whatis $arg0._M_impl._M_start
end
end

document pvector
Prints std::vector information.
Syntax: pvector
Note: idx, idx1 and idx2 must be in acceptable range [0...size()-1].
Examples:
pvector v - Prints vector content, size, capacity and T typedef
pvector v 0 - Prints element[idx] from vector
pvector v 1 2 - Prints elements in range [idx1..idx2] from vector
end

#
# std::list&lt;&gt;
#

define plist
if $argc == 0
help plist
else
set $head = &amp;$arg0._M_impl._M_node
set $current = $arg0-&gt;_M_impl-&gt;_M_node-&gt;_M_next
set $size = 0
while $current != $head
if $argc == 2
printf &quot;elem[%u]: &quot;, $size
p *($arg1*)($current + 1)
end
if $argc == 3
if $size == $arg2
printf &quot;elem[%u]: &quot;, $size
p *($arg1*)($current + 1)
end
end
set $current = $current-&gt;_M_next
set $size++
end
printf &quot;List size = %u n&quot;, $size
if $argc == 1
printf &quot;List &quot;
whatis $arg0
printf &quot;Use plist to see the elements in the list.n&quot;
end
end
end

document plist
Prints std::list information.
Syntax: plist : Prints list size, if T defined all elements or just element at idx
Examples:
plist l - prints list size and definition
plist l int - prints all elements and list size
plist l int 2 - prints the third element in the list (if exists) and list size
end

#
# std::map and std::multimap
#

define pmap
if $argc == 0
help pmap
else
set $tree = $arg0
set $i = 0
set $node = $tree-&gt;_M_t-&gt;_M_impl-&gt;_M_header-&gt;_M_left
set $end = $tree-&gt;_M_t-&gt;_M_impl-&gt;_M_header
set $tree_size = $tree-&gt;_M_t-&gt;_M_impl-&gt;_M_node_count
if $argc == 1
printf &quot;Map &quot;
whatis $tree
printf &quot;Use pmap to see the elements in the map.n&quot;
end
if $argc == 3
while $i &lt; $tree_size set $value = (void *)($node + 1) printf &quot;elem[%u]-&gt;left: &quot;, $i
p *($arg1*)$value
set $value = $value + 4
printf &quot;elem[%u]-&gt;right: &quot;, $i
p *($arg2*)$value
if $node-&gt;_M_right != 0
set $node = $node-&gt;_M_right
while $node-&gt;_M_left != 0
set $node = $node-&gt;_M_left
end
else
set $tmp_node = $node-&gt;_M_parent
while $node == $tmp_node-&gt;_M_right
set $node = $tmp_node
set $tmp_node = $tmp_node-&gt;_M_parent
end
if $node-&gt;_M_right != $tmp_node
set $node = $tmp_node
end
end
set $i++
end
end
if $argc == 4
set $idx = $arg3
set $ElementsFound = 0
while $i &lt; $tree_size set $value = (void *)($node + 1) if *($arg1*)$value == $idx printf &quot;elem[%u]-&gt;left: &quot;, $i
p *($arg1*)$value
set $value = $value + 4
printf &quot;elem[%u]-&gt;right: &quot;, $i
p *($arg2*)$value
set $ElementsFound++
end
if $node-&gt;_M_right != 0
set $node = $node-&gt;_M_right
while $node-&gt;_M_left != 0
set $node = $node-&gt;_M_left
end
else
set $tmp_node = $node-&gt;_M_parent
while $node == $tmp_node-&gt;_M_right
set $node = $tmp_node
set $tmp_node = $tmp_node-&gt;_M_parent
end
if $node-&gt;_M_right != $tmp_node
set $node = $tmp_node
end
end
set $i++
end
printf &quot;Number of elements found = %un&quot;, $ElementsFound
end
if $argc == 5
set $idx1 = $arg3
set $idx2 = $arg4
set $ElementsFound = 0
while $i &lt; $tree_size set $value = (void *)($node + 1) set $valueLeft = *($arg1*)$value set $valueRight = *($arg2*)($value + 4) if $valueLeft == $idx1 &amp;&amp; $valueRight == $idx2 printf &quot;elem[%u]-&gt;left: &quot;, $i
p $valueLeft
printf &quot;elem[%u]-&gt;right: &quot;, $i
p $valueRight
set $ElementsFound++
end
if $node-&gt;_M_right != 0
set $node = $node-&gt;_M_right
while $node-&gt;_M_left != 0
set $node = $node-&gt;_M_left
end
else
set $tmp_node = $node-&gt;_M_parent
while $node == $tmp_node-&gt;_M_right
set $node = $tmp_node
set $tmp_node = $tmp_node-&gt;_M_parent
end
if $node-&gt;_M_right != $tmp_node
set $node = $tmp_node
end
end
set $i++
end
printf &quot;Number of elements found = %un&quot;, $ElementsFound
end
printf &quot;Map size = %un&quot;, $tree_size
end
end

document pmap
Prints std::map or std::multimap information. Works for std::multimap as well.
Syntax: pmap : Prints map size, if T defined all elements or just element(s) with val(s)
Examples:
pmap m - prints map size and definition
pmap m int int - prints all elements and map size
pmap m int int 20 - prints the element(s) with left-value = 20 (if any) and map size
pmap m int int 20 200 - prints the element(s) with left-value = 20 and right-value = 200 (if any) and map size
end

#
# std::set and std::multiset
#

define pset
if $argc == 0
help pset
else
set $tree = $arg0
set $i = 0
set $node = $tree-&gt;_M_t-&gt;_M_impl-&gt;_M_header-&gt;_M_left
set $end = $tree-&gt;_M_t-&gt;_M_impl-&gt;_M_header
set $tree_size = $tree-&gt;_M_t-&gt;_M_impl-&gt;_M_node_count
if $argc == 1
printf &quot;Set &quot;
whatis $tree
printf &quot;Use pset to see the elements in the set.n&quot;
end
if $argc == 2
while $i &lt; $tree_size set $value = (void *)($node + 1) printf &quot;elem[%u]: &quot;, $i p *($arg1*)$value if $node-&gt;_M_right != 0
set $node = $node-&gt;_M_right
while $node-&gt;_M_left != 0
set $node = $node-&gt;_M_left
end
else
set $tmp_node = $node-&gt;_M_parent
while $node == $tmp_node-&gt;_M_right
set $node = $tmp_node
set $tmp_node = $tmp_node-&gt;_M_parent
end
if $node-&gt;_M_right != $tmp_node
set $node = $tmp_node
end
end
set $i++
end
end
if $argc == 3
set $idx = $arg2
set $ElementsFound = 0
while $i &lt; $tree_size set $value = (void *)($node + 1) if *($arg1*)$value == $idx printf &quot;elem[%u]: &quot;, $i p *($arg1*)$value set $ElementsFound++ end if $node-&gt;_M_right != 0
set $node = $node-&gt;_M_right
while $node-&gt;_M_left != 0
set $node = $node-&gt;_M_left
end
else
set $tmp_node = $node-&gt;_M_parent
while $node == $tmp_node-&gt;_M_right
set $node = $tmp_node
set $tmp_node = $tmp_node-&gt;_M_parent
end
if $node-&gt;_M_right != $tmp_node
set $node = $tmp_node
end
end
set $i++
end
printf &quot;Number of elements found = %un&quot;, $ElementsFound
end
printf &quot;Set size = %un&quot;, $tree_size
end
end

document pset
Prints std::set or std::multiset information. Works for std::multiset as well.
Syntax: pset : Prints set size, if T defined all elements or just element(s) having val
Examples:
pset s - prints set size and definition
pset s int - prints all elements and the size of s
pset s int 20 - prints the element(s) with value = 20 (if any) and the size of s
end

#
# std::dequeue
#

define pdequeue
if $argc == 0
help pdequeue
else
set $size = 0
set $start_cur = $arg0._M_impl._M_start._M_cur
set $start_last = $arg0._M_impl._M_start._M_last
set $start_stop = $start_last
while $start_cur != $start_stop
p *$start_cur
set $start_cur++
set $size++
end
set $finish_first = $arg0._M_impl._M_finish._M_first
set $finish_cur = $arg0._M_impl._M_finish._M_cur
set $finish_last = $arg0._M_impl._M_finish._M_last
if $finish_cur &lt; $finish_last set $finish_stop = $finish_cur else set $finish_stop = $finish_last end while $finish_first != $finish_stop p *$finish_first set $finish_first++ set $size++ end printf &quot;Dequeue size = %un&quot;, $size end end document pdequeue Prints std::dequeue information.
Syntax: pdequeue : Prints dequeue size, if T defined all elements
Deque elements are listed &quot;left to right&quot; (left-most stands for front and right-most stands for back)
Example:
pdequeue d - prints all elements and size of d
end

#
# std::stack
#

define pstack
if $argc == 0
help pstack
else
set $start_cur = $arg0.c._M_impl._M_start._M_cur
set $finish_cur = $arg0.c._M_impl._M_finish._M_cur
set $size = $finish_cur - $start_cur
set $i = $size - 1
while $i &gt;= 0
p *($start_cur + $i)
set $i--
end
printf &quot;Stack size = %un&quot;, $size
end
end

document pstack
Prints std::stack information.
Syntax: pstack : Prints all elements and size of the stack
Stack elements are listed &quot;top to buttom&quot; (top-most element is the first to come on pop)
Example:
pstack s - prints all elements and the size of s
end

#
# std::queue
#

define pqueue
if $argc == 0
help pqueue
else
set $start_cur = $arg0.c._M_impl._M_start._M_cur
set $finish_cur = $arg0.c._M_impl._M_finish._M_cur
set $size = $finish_cur - $start_cur
set $i = 0
while $i &lt; $size p *($start_cur + $i) set $i++ end printf &quot;Queue size = %un&quot;, $size end end document pqueue Prints std::queue information.
Syntax: pqueue : Prints all elements and the size of the queue
Queue elements are listed &quot;top to bottom&quot; (top-most element is the first to come on pop)
Example:
pqueue q - prints all elements and the size of q
end

#
# std::priority_queue
#

define ppqueue
if $argc == 0
help ppqueue
else
set $size = $arg0.c._M_impl._M_finish - $arg0.c._M_impl._M_start
set $capacity = $arg0.c._M_impl._M_end_of_storage - $arg0.c._M_impl._M_start
set $i = $size - 1
while $i &gt;= 0
p *($arg0.c._M_impl._M_start + $i)
set $i--
end
printf &quot;Priority queue size = %un&quot;, $size
printf &quot;Priority queue capacity = %un&quot;, $capacity
end
end

document ppqueue
Prints std::priority_queue information.
Syntax: ppqueue : Prints all elements, size and capacity of the priority_queue
Priority_queue elements are listed &quot;top to buttom&quot; (top-most element is the first to come on pop)
Example:
ppqueue pq - prints all elements, size and capacity of pq
end

#
# std::bitset
#

define pbitset
if $argc == 0
help pbitset
else
p /t $arg0._M_w
end
end

document pbitset
Prints std::bitset information.
Syntax: pbitset : Prints all bits in bitset
Example:
pbitset b - prints all bits in b
end

#
# std::string
#

define pstring
if $argc == 0
help pstring
else
printf &quot;String ttt= &quot;%s&quot;n&quot;, $arg0._M_data()
printf &quot;String size/length t= %un&quot;, $arg0._M_rep()-&gt;_M_length
printf &quot;String capacity t= %un&quot;, $arg0._M_rep()-&gt;_M_capacity
printf &quot;String ref-count t= %dn&quot;, $arg0._M_rep()-&gt;_M_refcount
end
end

document pstring
Prints std::string information.
Syntax: pstring
Example:
pstring s - Prints content, size/length, capacity and ref-count of string s
end

#
# std::wstring
#

define pwstring
if $argc == 0
help pwstring
else
call printf(&quot;WString tt= &quot;%ls&quot;n&quot;, $arg0._M_data())
printf &quot;WString size/length t= %un&quot;, $arg0._M_rep()-&gt;_M_length
printf &quot;WString capacity t= %un&quot;, $arg0._M_rep()-&gt;_M_capacity
printf &quot;WString ref-count t= %dn&quot;, $arg0._M_rep()-&gt;_M_refcount
end
end

document pwstring
Prints std::wstring information.
Syntax: pwstring
Example:
pwstring s - Prints content, size/length, capacity and ref-count of wstring s
end

#
# C++ related beautifiers
#

set print pretty on
set print object on
set print static-members on
set print vtbl on
set print demangle on
set demangle-style gnu-v3
set print sevenbit-strings off
</pre>
</div>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-lg-3 well well-sm" id="sidebar">
<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="https://www.google.com/+KirillKolodyazhniy"><i
                            class="icon-google-plus-sign icon-large"></i>google-plus
                    </a></li>
                    <li class="list-group-item"><a href="https://github.com/Kolkir"><i
                            class="icon-github-sign icon-large"></i>github
                    </a></li>
                    <li class="list-group-item"><a href="http://ua.linkedin.com/pub/kirill-kolodyazhniy/14/969/79b/"><i
                            class="icon-linkedin-sign icon-large"></i>linkedin
                    </a></li>



            <li class="list-group-item"><a href="./tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
                <li class="list-group-item tag-1">
                    <a href="./tag/multithreading.html">
                        Multithreading
                    </a>
                </li>
                <li class="list-group-item tag-1">
                    <a href="./tag/c11.html">
                        C++11
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/cpptask.html">
                        CppTask
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/c.html">
                        C++
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/unittesting.html">
                        UnitTesting
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/scanner.html">
                        Scanner
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/overflow.html">
                        Overflow
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/stream.html">
                        stream
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/parsing.html">
                        parsing
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/calibration.html">
                        calibration
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="./tag/laser.html">
                        Laser
                    </a>
                </li>
        </ul>
    </section>
</aside>        </div>
    </div>
</div>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>
</body>
</html>